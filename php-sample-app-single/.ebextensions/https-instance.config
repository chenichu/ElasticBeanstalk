packages:
  yum:
    mod24_ssl : []

files:
  /etc/httpd/conf.d/ssl.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      LoadModule ssl_module modules/mod_ssl.so
      Listen 443
      <VirtualHost *:443>
        <Proxy *>
          Order deny,allow
          Allow from all
        </Proxy>

        SSLEngine             on
        SSLCertificateFile    "/etc/pki/tls/certs/server.crt"
        SSLCertificateKeyFile "/etc/pki/tls/certs/server.key"
        SSLCipherSuite        EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
        SSLProtocol           All -SSLv2 -SSLv3
        SSLHonorCipherOrder   On
        SSLSessionTickets     Off
        
        Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains; preload"
        Header always set X-Frame-Options DENY
        Header always set X-Content-Type-Options nosniff
        
        ProxyPass / http://localhost:80/ retry=0
        ProxyPassReverse / http://localhost:80/
        ProxyPreserveHost on
        RequestHeader set X-Forwarded-Proto "https" early
        
      </VirtualHost>
      
  /etc/pki/tls/certs/server.crt:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN CERTIFICATE-----
      MIIDfTCCAmWgAwIBAgIJAJRmqwfDVrrsMA0GCSqGSIb3DQEBCwUAMFUxCzAJBgNV
      BAYTAlpBMRUwEwYDVQQIDAxXZXN0ZXJuIENhcGUxEjAQBgNVBAcMCUNhcGUgVG93
      bjENMAsGA1UECgwEU2VsZjEMMAoGA1UECwwDRGV2MB4XDTE4MTEwNzIwMDQzNFoX
      DTE5MTEwNzIwMDQzNFowVTELMAkGA1UEBhMCWkExFTATBgNVBAgMDFdlc3Rlcm4g
      Q2FwZTESMBAGA1UEBwwJQ2FwZSBUb3duMQ0wCwYDVQQKDARTZWxmMQwwCgYDVQQL
      DANEZXYwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC9F5rRMiaB4iym
      L6ESnlUgL84IdQ7drol4VfE2tTGsgnz8VWlrcCDLAWeAGp7gAgUmiRK4cw+rHDHq
      sqoExQKl3//aTdRTxasi+Fggl+07HW1qizf42jxXYFkf9bE+9vWfiI4aSw60AV+Z
      9XsSj+8k3MSTj1ddeADTHYZuQjtgpSbAVpFm3iJttl9pCiQRIdDK2o5Kuo3eluuf
      VIZt+9bXNiCoIH2zknJBnVjvzlqj4sU9b+Wf2unNY0MVXp8PFFr12Asd1ZebZvtU
      yTECUiz5WWqAcp+L5K1JGKzNci8LQDJXw9vnPyVU4octCpU3WciQK3ia59Q+3Uiq
      7ilmhJGlAgMBAAGjUDBOMB0GA1UdDgQWBBQ81cD/kW4D5l8drlY5hpyObljsDzAf
      BgNVHSMEGDAWgBQ81cD/kW4D5l8drlY5hpyObljsDzAMBgNVHRMEBTADAQH/MA0G
      CSqGSIb3DQEBCwUAA4IBAQC1xSSbuKfDrs3dlb1XzqdmlJ7nvPbinqAf67eRrUCK
      ouT2Eah0RmcyznPQWwSAdfCtImWuOzWUprCVMUOeyIUjxaqBHv6CPHuzMkQa+hcd
      gsQnUuMkA5YZpRaT0siFkQDN9RIdISgw6M1LL9+NVpIuKhscoSnygfLqNXurTDTS
      SrSKFMcOYlzpOtTxCEKdCYBuKbqzWVk+6LnTMSKYvPCe+car+zY4cJtk79M4pthN
      O1PQmzk/fn9n/FP58idz+Yq+cSVLjq8N2cYpNa4zJsQqjAVpvIUEUJC7zXIY+RLC
      QZnhy5t8kshdkxTeYeZhtDuG4RoaSlwTBjCbVCLlDKHl
      -----END CERTIFICATE-----
      
  /etc/pki/tls/certs/server.key:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN RSA PRIVATE KEY-----
      MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC9F5rRMiaB4iym
      L6ESnlUgL84IdQ7drol4VfE2tTGsgnz8VWlrcCDLAWeAGp7gAgUmiRK4cw+rHDHq
      sqoExQKl3//aTdRTxasi+Fggl+07HW1qizf42jxXYFkf9bE+9vWfiI4aSw60AV+Z
      9XsSj+8k3MSTj1ddeADTHYZuQjtgpSbAVpFm3iJttl9pCiQRIdDK2o5Kuo3eluuf
      VIZt+9bXNiCoIH2zknJBnVjvzlqj4sU9b+Wf2unNY0MVXp8PFFr12Asd1ZebZvtU
      yTECUiz5WWqAcp+L5K1JGKzNci8LQDJXw9vnPyVU4octCpU3WciQK3ia59Q+3Uiq
      7ilmhJGlAgMBAAECggEAEo+bmcdDcmJiIZnxRKOYFYW7wqbC4827Hr3I5KbajmVs
      oVQ8+dfS0Dp+D1wNlk18dfDkjoh01EX7PF93QuqXvPKE6cfT/LkdeFxKQkDHf5L+
      54Ns5hd97tG9Td7PHDAfoh5EXJ5bfh3YZYNsJkFMpyCohxd96uXZpt9yD6aer3i7
      QjzMDL0Zhmo+A9F+BsThPVDFjJ6hwJ48H4ABZiRoxWD95nGxxXAQuMe2+7Dj3uwc
      7OF0fqdCx1Hj/sztwzTb/hrlfqiiLTulZtFeD1WIAkPUzSdchrf9/lkPLIV3ABKw
      3iZxcndpeKX5G+T+IqW1ZwywoI5TYuJi9Nyti5vvjQKBgQDvFlBxnkZj4ilRmmw4
      Jf1NEjPuMGkvp8B102UFSkpwUfjg5Ec/peIo60OWcXUkQzHy/4rHqvX6GyC6Yxv8
      m1vhTQQQd83DuJwT1OeSllm3AMf7Hr4NbW4WPAx++dcaUHVLqJ5qir2PIR4pzFfz
      tICB5aUmd1f2oazxvN7uDqII7wKBgQDKd+uHoG8QQ19aNfGdwEmQK1bNadxG4m72
      0mrAw/RMivqpSJSWeOb/e/qo2XvPwR06dvITP1wvJVwR126Bfx3xrppK5IDZqVYA
      brL785FWvXqrePBlJc39qxIWcaU1OHoUiLtdqqEG8EHjIiLkD/ejMtunXp6NYRuS
      sRvAPx0GqwKBgE/Nf+5cqRwf2jDNvX+EVqcKA2FmsUVh1eC+PcLlSDFzewH90DZT
      dUi5NmcZ2cLP1vVIDJeW3eGsemEcQbQwWxu5rDie9IR2s0n/T4hjPPDThuywFzm+
      I/ex9W3QkNbMskodrzrasmj64emLtnO29QnmkBhlz2uYDXTm2PZW1gjrAoGBAL5J
      eqlbVUa5qzJDpLOYdwryUIB6T7anNZbwJ7jH8iDGNdNIDa5mLuRLB0gOLtkRLIE4
      LUd9swv0VtXF3WwDpobwjL56h8cJ6XQ6lilJv30AU/w4i+bkYvdYAoXphVXBoKsP
      3tindvPodmQcPyKNBzbwo5Rnzygc7icuIWDLcGJFAoGBALtscvqxx3NrMN1igoZ8
      VTVhtDXa7+QzLZYXxqON2XHHZp/PnI7w0lj6Fis4X+4qrOn9xSvShoxkUnYPYXIT
      PE3hNDSVGZmeigegaqTCGhopf7YIE8M9e1y7ax9tl31h3GDUsAnWbjs8AU7QTl0p
      zuIecUeutcdyUfA/cfvKK0U0
      -----END RSA PRIVATE KEY-----
